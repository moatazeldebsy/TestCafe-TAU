!function Ve(ke){var Pe=ke.document;!function(s,o){var t="default"in s?s.default:s,e="default"in o?o.default:o,r={uiRoot:null,element:function(){return this.uiRoot||(this.uiRoot=Pe.createElement("div"),s.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=s.shadowUI.getRoot();s.nativeMethods.nodeParentNodeGetter.call(t).removeChild(t)}},c=t.shadowUI,u=t.utils.browser,a=t.utils.featureDetection,d=t.nativeMethods,h=t.eventSandbox.eventSimulator,l=t.eventSandbox.listeners,p=e.positionUtils,m=e.domUtils,g=e.styleUtils,f=e.eventUtils,v=e.arrayUtils,y="tcOptionList",C="tcOptionGroup",E="tcOption",_="disabled",w=u.isIE?30:20,S=null,I=null,x=[],b=[];function T(t){(t.target||t.srcElement)===S||m.containsElement(S,t.target)||m.containsElement(I,t.target)||D()}function B(t,e,i){var n,s=v.indexOf(b,t.target);s<0||(i(),(n=-1<t.target.className.indexOf(_))&&u.isWebKit||function(t,e){var i=S.selectedIndex,n=S.getElementsByTagName("option")[t],s=!e&&t!==i;s&&!u.isIE&&(S.selectedIndex=t),u.isFirefox||u.isIE||!s||(h.input(S),h.change(S)),(u.isFirefox||u.isIE)&&h.mousedown(u.isFirefox?n:S),a.isTouchDevice||h.mouseup(u.isFirefox?n:S),(u.isFirefox||u.isIE)&&s&&(u.isIE&&(S.selectedIndex=t),u.isIE||h.input(S),h.change(S)),a.isTouchDevice||h.click(u.isFirefox||u.isIE?n:S),e||D()}(s,n))}function U(t,e){for(var i,n,s,o,a,r,l,u=m.getChildrenLength(t),h=0;h<u;h++)m.isOptionElement(t[h])?(o=t[h],a=e,l=r=void 0,r=Pe.createElement("div"),l=o.disabled||"optgroup"===m.getTagName(o.parentElement)&&o.parentElement.disabled,d.nodeTextContentSetter.call(r,o.text),a.appendChild(r),c.addClass(r,E),l&&(c.addClass(r,_),g.set(r,"color",g.get(o,"color"))),b.push(r)):"optgroup"===m.getTagName(t[h])&&(i=t[h],n=e,s=void 0,s=Pe.createElement("div"),d.nodeTextContentSetter.call(s,i.label||" "),n.appendChild(s),c.addClass(s,C),s.disabled&&(c.addClass(s,_),g.set(s,"color",g.get(i,"color"))),U(i.children,s),x.push(s))}function D(){m.remove(I),f.unbind(Pe,"mousedown",T),S=I=null,b=[],x=[]}function M(t){return t?t===S:!!S}var i=Object.freeze({__proto__:null,expandOptionList:function(t){var e=t.children;if(e.length){if(S){var i=t===S;if(D(),i)return}S=t,I=Pe.createElement("div"),r.element().appendChild(I),c.addClass(I,y),U(e,I),l.addInternalEventListener(ke,["click"],B),d.setTimeout.call(ke,function(){f.bind(Pe,"mousedown",T)},0),g.set(I,{position:"absolute",fontSize:g.get(S,"fontSize"),fontFamily:g.get(S,"fontFamily"),minWidth:g.getWidth(S)+"px",left:p.getOffsetPosition(S).left+"px",height:m.getSelectVisibleChildren(t).length>w?g.getOptionHeight(t)*w:""});var n,s=p.getOffsetPosition(S).top,o=g.getHeight(I),a=s+g.getHeight(S)+2;a+o>g.getScrollTop(ke)+g.getHeight(ke)&&(n=s-3-o)>=g.getScrollTop(ke)&&(a=n),g.set(I,"top",a+"px")}},collapseOptionList:D,isOptionListExpanded:M,getEmulatedChildElement:function(t){var e="optgroup"===m.getTagName(t),i=m.getElementIndexInParent(S,t);return e?x[i]:b[i]},scrollOptionListByChild:function(t){var e,i,n,s,o,a,r=m.getSelectParent(t);r&&(e=g.getSelectElementSize(r),i=g.getOptionHeight(r),n=0,o=(s=Math.max(g.getScrollTop(r)/i,0))+e-1,(a=m.getChildVisibleIndex(r,t))<s?(n=i*(s-a),g.setScrollTop(r,Math.max(g.getScrollTop(r)-n,0))):o<a&&(n=i*(a-o),g.setScrollTop(r,g.getScrollTop(r)+n)))},getSelectChildCenter:function(t){var e=m.getSelectParent(t);if(!e)return{x:0,y:0};var i=g.getOptionHeight(e),n=p.getElementRectangle(t);return{x:Math.round(n.left+n.width/2),y:Math.round(n.top+i/2)}},switchOptionsByKeys:function(t,e){var i=g.getSelectElementSize(t),n=!g.hasDimensions(c.select("."+y)[0]);if(/down|up/.test(e)||!u.isIE&&(i<=1||u.isFirefox)&&(n||u.isFirefox)&&/left|right/.test(e)){for(var s=t.querySelectorAll("option"),o=[],a=0;a<s.length;a++){var r=s[a].parentElement;s[a].disabled||"optgroup"===m.getTagName(r)&&r.disabled||o.push(s[a])}var l=v.indexOf(o,s[t.selectedIndex])+(/down|right/.test(e)?1:-1);0<=l&&l<o.length&&(t.selectedIndex=v.indexOf(s,o[l]),u.isIE||h.input(t),h.change(t))}},isOptionElementVisible:function(t){var e=m.getSelectParent(t);if(!e)return!0;var i=M(e),n=g.getSelectElementSize(e);return i||1<n}}),A="Loading page...",V="modal-background",k="loading-text",P="loading-icon",R=null,W=null,O=null,F=!1;function L(){function t(){var t=o.styleUtils.getHeight(ke),e=o.styleUtils.getWidth(ke);o.styleUtils.set(R,"width",e+"px"),o.styleUtils.set(R,"height",t+"px"),o.styleUtils.set(O,{left:Math.round((e-o.styleUtils.getWidth(O))/2)+"px",top:Math.round((t-o.styleUtils.getHeight(O))/2)+"px"})}t(),o.eventUtils.bind(ke,"resize",t)}function n(){var t,e,i,n;t=r.element(),R=Pe.createElement("div"),t.appendChild(R),s.shadowUI.addClass(R,V),W=Pe.createElement("div"),s.nativeMethods.nodeTextContentSetter.call(W,A),t.appendChild(W),s.shadowUI.addClass(W,k),O=Pe.createElement("div"),o.styleUtils.set(O,"visibility","hidden"),t.appendChild(O),s.shadowUI.addClass(O,P),L(),e=o.styleUtils.getHeight(ke),i=o.styleUtils.getWidth(ke),(n=!o.styleUtils.hasDimensions(W))&&(o.styleUtils.set(W,"visibility","hidden"),o.styleUtils.set(W,"display","block")),o.styleUtils.set(W,{left:Math.max((i-o.styleUtils.getWidth(W))/2,0)+"px",top:Math.max((e-o.styleUtils.getHeight(W))/2,0)+"px"}),n&&(o.styleUtils.set(W,"display","none"),o.styleUtils.set(W,"visibility","")),F=!0}var H=Object.freeze({__proto__:null,initAndShowLoadingText:function(){function t(){n(),o.styleUtils.set(R,"opacity",.8),o.styleUtils.set(R,"display","block"),o.styleUtils.set(W,"display","block"),e=!0}var e=!1,i=function(){e||(Pe.body?t():s.nativeMethods.setTimeout.call(ke,i,0))};i(),o.eventUtils.documentReady().then(function(){e||t()})},show:function(t){F||n(),o.styleUtils.set(R,"opacity",t?0:.7),o.styleUtils.set(R,"display","block")},hide:function(){F&&(o.styleUtils.set(W,"display","none"),o.styleUtils.set(R,"display","none"))},showLoadingIcon:function(){o.styleUtils.set(O,"visibility","visible")},hideLoadingIcon:function(){o.styleUtils.set(O,"visibility","hidden")}}),N=t.shadowUI,q=e.styleUtils,z="success",G=(j.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),q.set(this.valueElement,"width",t+"%")},j.prototype.setSuccess=function(t){t?N.addClass(this.containerElement,z):N.removeClass(this.containerElement,z)},j);function j(t){this.containerElement=Pe.createElement("div"),this.valueElement=Pe.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),N.addClass(this.containerElement,"progress-bar"),N.addClass(this.valueElement,"value")}var K=t.shadowUI,Y=t.nativeMethods,X=e.eventUtils,J=e.styleUtils,Q="progress-panel",Z="title",$="content",tt=(et._getInvisibleElementProperty=function(t,e){var i="none"===J.get(t,"display");i&&J.set(t,"display","block");var n=t[e];return i&&J.set(t,"display","none"),n},et._showAtWindowCenter=function(t){var e=et._getInvisibleElementProperty(t,"offsetHeight"),i=et._getInvisibleElementProperty(t,"offsetWidth"),n=Math.round(J.getHeight(ke)/2-e/2),s=Math.round(J.getWidth(ke)/2-i/2);J.set(t,{left:s+"px",top:n+"px"})},et.prototype._setCurrentProgress=function(){var t=Math.round((Date.now()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},et.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},et.prototype._stopAnimation=function(){Y.clearInterval.call(ke,this.animationInterval)},et.prototype._animate=function(t,e,i,n){var s,o,a,r=this,l=Date.now(),u=i?0:1;i&&(J.set(t,"opacity",u),J.set(t,"display","block")),this._stopAnimation(),this.animationInterval=Y.setInterval.call(ke,function(){s=Date.now()-l,o=Math.min(s/e,1),a=.5-Math.cos(o*Math.PI)/2,J.set(t,"opacity",u+(i?a:-a)),1===o&&(r._stopAnimation(),n&&n())},10)},et.prototype._showPanel=function(){X.bind(ke,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},et.prototype._hidePanel=function(t){var e=this;this.startTime=null,X.unbind(ke,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return J.set(e.panelDiv,"display","none")})},et.prototype.show=function(t,e){var i=this;this.startTime=Date.now(),this.maxTimeout=e,Y.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=Y.setTimeout.call(ke,function(){i.openingTimeout=null,i._setCurrentProgress(),i._showPanel(),i.updateInterval=Y.setInterval.call(ke,function(){return i._setCurrentProgress()},100)},300)},et.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(Y.clearTimeout.call(ke,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(Y.clearInterval.call(ke,this.updateInterval),this.updateInterval=null),t?this.startTime&&Date.now()-this.startTime<1e3?Y.setTimeout.call(ke,function(){Y.setTimeout.call(ke,function(){return e._hidePanel(!1)},200)},100):Y.setTimeout.call(ke,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},et);function et(){var t=this;this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=Pe.createElement("div"),r.element().appendChild(this.panelDiv),this.titleDiv=Pe.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=Pe.createElement("div"),this.panelDiv.appendChild(this.contentDiv),K.addClass(this.panelDiv,Q),K.addClass(this.titleDiv,Z),K.addClass(this.contentDiv,$),et._showAtWindowCenter(this.panelDiv),this.progressBar=new G(this.contentDiv),this.disposePanel=function(){return et._showAtWindowCenter(t.panelDiv)}}var it=function(t,e){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function nt(t,e){function i(){this.constructor=t}it(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var st=t.shadowUI,ot=t.nativeMethods,at=e.styleUtils,rt="determinate",lt=(ut.prototype._setCurrentProgress=function(){var t=(Date.now()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),i=at.getWidth(this.progressBar),n=Math.round(i*e);at.set(this.firstValueElement,"width",n+"px")},ut.prototype.start=function(t,e){var i=this;st.addClass(this.progressBar,rt),this.maxTimeout=t,this.startTime=e||Date.now(),this._setCurrentProgress(),this.animationInterval=ot.setInterval.call(ke,function(){return i._setCurrentProgress()},10)},ut.prototype.stop=function(){this.animationInterval&&(ot.clearInterval.call(ke,this.animationInterval),this.animationInterval=null)},ut.prototype.reset=function(){at.set(this.firstValueElement,"width",0),st.removeClass(this.progressBar,rt)},ut);function ut(t,e){this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}var ht=t.shadowUI,ct=t.nativeMethods,dt=e.styleUtils,pt=e.positionUtils,mt={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},gt={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},ft=0,vt=.6,yt=1,Ct="indeterminate",Et=(_t._updateValueAnimation=function(t,e,i){var n,s,o,a,r,l,u,h,c,d,p,m,g,f=i.time,v=i.points,y=i.positionByCompletePercent,C=Date.now()-t,E=(n=C/f,s=v[0],o=v[1],3*Math.pow(1-n,2)*n*s+3*(1-n)*n*n*o+n*n*n),_=(h=(l=(a=E)<vt)?vt:yt,c=(r=y)[u=l?ft:vt],d=r[h],p={x:u,y:c.left},m={x:h,y:d.left},g=pt.getLineYByXCoord(p,m,a),p={x:u,y:c.right},m={x:h,y:d.right},{left:g,right:pt.getLineYByXCoord(p,m,a)}),w=_.left,S=_.right;dt.set(e,"left",Math.round(w)+"%"),dt.set(e,"right",Math.round(S)+"%")},_t.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(ct.clearInterval.call(ke,this.animationInterval),this.animationInterval=null),dt.set(this.firstValue,"left","-35%"),dt.set(this.firstValue,"right","100%")},_t.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(ct.clearInterval.call(ke,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),dt.set(this.secondValue,"left","-200%"),dt.set(this.secondValue,"right","100%")},_t.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=Date.now();this.animationInterval=ct.setInterval.call(ke,function(){_t._updateValueAnimation(e,t.firstValue,mt)},10)},_t.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=Date.now();this.secondValueAnimationInterval=ct.setInterval.call(ke,function(){_t._updateValueAnimation(e,t.secondValue,gt)},10)},_t.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=ct.setTimeout.call(ke,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=ct.setTimeout.call(ke,function(){return t._startAnimation()},1950)},_t.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(ct.clearInterval.call(ke,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(ct.clearInterval.call(ke,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},_t.prototype.start=function(){ht.addClass(this.progressBar,Ct),this._startAnimation()},_t.prototype.stop=function(){ht.removeClass(this.progressBar,Ct),this._stopAnimation()},_t);function _t(t,e,i){this.progressBar=t,this.firstValue=e,this.secondValue=i,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}var wt=t.shadowUI,St=e.styleUtils,It=(xt.prototype._create=function(t){this.progressBar=Pe.createElement("div"),wt.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=Pe.createElement("div");wt.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=Pe.createElement("div"),wt.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=Pe.createElement("div"),wt.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},xt.prototype.show=function(){St.set(this.progressBar,"visibility","visible")},xt.prototype.hide=function(){St.set(this.progressBar,"visibility","hidden")},xt);function xt(t){this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new lt(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new Et(this.progressBar,this.firstValueElement,this.secondValueElement)}var bt,Tt="start-waiting-element",Bt="end-waiting-element-request",Ut="end-waiting-element-response",Dt="start-waiting-assertion-retries",Mt="end-waiting-assertion-retries-request",At="end-waiting-assertion-retries-response",Vt=t.Promise,kt=t.shadowUI,Pt=t.nativeMethods,Rt=t.eventSandbox.message,Wt=t.utils.browser,Ot=t.utils.featureDetection,Ft=t.eventSandbox.listeners,Lt=e.styleUtils,Ht=e.eventUtils,Nt=e.domUtils,qt=e.serviceUtils,zt=e.arrayUtils,Gt="waiting-element-failed",jt="waiting-element-success",Kt="%testCafeStatusPrefix%",Yt=(nt(Xt,bt=qt.EventEmitter),Xt.prototype._createButton=function(t,e){var i=Pe.createElement("div"),n=Pe.createElement("div"),s=Pe.createElement("span");return Pt.nodeTextContentSetter.call(s,t),kt.addClass(i,"button"),kt.addClass(i,e),kt.addClass(n,"button-icon"),Wt.isSafari&&(s.style.position="relative",s.style.top="1px"),i.appendChild(n),i.appendChild(s),i},Xt.prototype._createIconArea=function(){this.icon=Pe.createElement("div"),kt.addClass(this.icon,"icon"),this.statusBar.appendChild(this.icon)},Xt.prototype._createInformationArea=function(){this.infoContainer=Pe.createElement("div"),kt.addClass(this.infoContainer,"info-container"),this.statusBar.appendChild(this.infoContainer);var t=Pe.createElement("div");kt.addClass(t,"info-text-container"),this.infoContainer.appendChild(t);var e=Pe.createElement("div");kt.addClass(e,"status-container"),t.appendChild(e),this.statusDiv=Pe.createElement("div"),this.statusDiv=Pe.createElement("div"),Pt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("Loading Web Page...")),kt.addClass(this.statusDiv,"status"),kt.addClass(this.statusDiv,"info"),e.appendChild(this.statusDiv);var i=Pe.createElement("div");Pt.nodeTextContentSetter.call(i,this.fixtureName+" - "+this.testName),kt.addClass(i,"fixture"),kt.addClass(i,"info"),e.appendChild(i);var n=Pe.createElement("div");Pt.nodeTextContentSetter.call(n,this.userAgent),kt.addClass(n,"user-agent"),t.appendChild(n)},Xt.prototype._createActionsArea=function(){var t=this;this.actionsContainer=Pe.createElement("div"),kt.addClass(this.actionsContainer,"actions-container"),this.statusBar.appendChild(this.actionsContainer),this.buttons=Pe.createElement("div"),kt.addClass(this.buttons,"buttons"),this.actionsContainer.appendChild(this.buttons),this.unlockButton=this._createButton("Unlock Page","locked"),this.resumeButton=this._createButton("Resume","resume"),this.nextButton=this._createButton("Next Action","step"),this.finishButton=this._createButton("Finish","finish"),this.buttons.appendChild(this.unlockButton),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.nextButton),this.actionsContainer.style.display="none",this._bindClickOnce([this.unlockButton],function(){kt.removeClass(t.unlockButton,"locked"),kt.addClass(t.unlockButton,"unlocked"),Pt.nodeTextContentSetter.call(t.unlockButton.querySelector("span"),"Page unlocked"),t.state.locked=!1,t.emit(t.UNLOCK_PAGE_BTN_CLICK,{})}),this.unlockButton.style.display="none"},Xt.prototype._create=function(){this.statusBar=Pe.createElement("div"),kt.addClass(this.statusBar,"status-bar"),this._createIconArea(),this._createInformationArea(),this._createActionsArea(),this.progressBar=new It(this.infoContainer),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),r.element().appendChild(this.statusBar),this._bindHandlers(),this.state.created=!0},Xt.prototype._createBeforeReady=function(){var t=this;this.state.created||ke!==ke.top||(Pe.body?this._create():Pt.setTimeout.call(ke,function(){return t._createBeforeReady()},0))},Xt.prototype._animate=function(t){var e,i,n,s=this,o=Date.now(),a=parseInt(Lt.get(this.statusBar,"opacity"),10)||0;this._stopAnimation(),t&&(Lt.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=Pt.setInterval.call(ke,function(){e=Date.now()-o,i=Math.min(e/500,1),n=.5-Math.cos(i*Math.PI)/2,Lt.set(s.statusBar,"opacity",a+(t?n:-n)),1===i&&(s._stopAnimation(),t||(Lt.set(s.statusBar,"visibility","hidden"),s.state.hidden=!0),s.state.showing=!1,s.state.hiding=!1)},10)},Xt.prototype._stopAnimation=function(){this.animationInterval&&(Pt.clearInterval.call(ke,this.animationInterval),this.animationInterval=null)},Xt.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},Xt.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},Xt.prototype._bindHandlers=function(){var e=this;Ft.initElementListening(ke,["resize"]),Ft.addInternalEventListener(ke,["resize"],function(){e.windowHeight=ke.innerHeight});var i=Lt.getHeight(this.statusBar);Ft.addFirstInternalHandler(ke,["mousemove","mouseout","touchmove"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"!==t.type&&"touchmove"!==t.type||(t.clientY>e.windowHeight-i?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},Xt.prototype._bindClickOnce=function(t,i){var n=this,s=Ot.isTouchDevice?"touchstart":"mousedown",o=function(e){zt.find(t,function(t){return Nt.containsElement(t,e.target)})?(Ht.preventDefault(e),Ft.removeInternalEventListener(ke,[s],o),i(e)):Nt.containsElement(n.statusBar,e.target)&&Ht.preventDefault(e)};Ft.addInternalEventListener(ke,[s],o)},Xt.prototype._initChildListening=function(){var i=this;Rt.on(Rt.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===Tt?i.showWaitingElementStatus(e.timeout):e.cmd===Bt?i.hideWaitingElementStatus(e.waitingSuccess).then(function(){return Rt.sendServiceMsg({cmd:Ut},t.source)}):e.cmd===Dt?i.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===Mt&&i.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return Rt.sendServiceMsg({cmd:At},t.source)})})},Xt.prototype._resetState=function(){this.state.debugging=!1,this.actionsContainer.style.display="none",this.unlockButton.style.display="none",Pt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("")),this.progressBar.hide()},Xt.prototype._getFullStatusText=function(t){var e=this.contextStorage.getItem(Kt)||"";return e+(e&&t?". ":"")+t},Xt.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for assertion execution...":"Waiting for element to appear...";Pt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(t)),this.progressBar.show()},Xt.prototype._hideWaitingStatus=function(e){var i=this;return new Vt(function(t){Pt.setTimeout.call(ke,function(){i.state.waiting||i.state.debugging||(kt.removeClass(i.statusBar,jt),kt.removeClass(i.statusBar,Gt),i.progressBar.determinateIndicator.reset(),i._resetState()),t()},e?0:500)})},Xt.prototype._showDebuggingStatus=function(t){var n=this;return new Vt(function(i){n.state.debugging=!0,n.state.locked=!0,t?(n.buttons.removeChild(n.nextButton),n.buttons.removeChild(n.resumeButton),n.buttons.appendChild(n.finishButton),Pt.nodeTextContentSetter.call(n.statusDiv,n._getFullStatusText("Test failed")),kt.removeClass(n.statusBar,jt),kt.addClass(n.statusBar,Gt)):Pt.nodeTextContentSetter.call(n.statusDiv,n._getFullStatusText("Debugging test...")),n.actionsContainer.style.display="",n.unlockButton.style.display="",n._bindClickOnce([n.resumeButton,n.nextButton,n.finishButton],function(t){var e=Nt.containsElement(n.nextButton,t.target);n._resetState(),i(e)})})},Xt.prototype._setWaitingStatus=function(t,e){var i=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=Pt.setTimeout.call(ke,function(){i.showingTimeout=null,i._showWaitingStatus()},300)},Xt.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?kt.addClass(this.statusBar,jt):kt.addClass(this.statusBar,Gt);var e=this.showingTimeout&&t;return this.showingTimeout&&(Pt.clearTimeout.call(ke,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},Xt.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},Xt.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),Lt.set(this.statusBar,"opacity",1),Lt.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},Xt.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},Xt.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?Vt.resolve():this._resetWaitingStatus(t)},Xt.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},Xt.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},Xt.prototype.setStatusPrefix=function(t){this.contextStorage.setItem(Kt,t),Pt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(""))},Xt);function Xt(t,e,i,n){var s=bt.call(this)||this;return s.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",s.userAgent=t,s.fixtureName=e,s.testName=i,s.contextStorage=n,s.statusBar=null,s.infoContainer=null,s.actionsContainer=null,s.icon=null,s.resumeButton=null,s.finishButton=null,s.nextButton=null,s.statusDiv=null,s.buttons=null,s.progressBar=null,s.animationInterval=null,s.showingTimeout=null,s.windowHeight=Pe.documentElement?Lt.getHeight(ke):ke.innerHeight,s.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},s.currentView=null,s._createBeforeReady(),s._initChildListening(),s}var Jt,Qt=e.sendRequestToFrame,Zt=t.eventSandbox.message,$t=(nt(te,Jt=Yt),te.prototype.showWaitingElementStatus=function(t){Zt.sendServiceMsg({cmd:Tt,timeout:t},ke.top)},te.prototype.hideWaitingElementStatus=function(t){return Qt({cmd:Bt,waitingSuccess:t},Ut,ke.top)},te.prototype.showWaitingAssertionRetriesStatus=function(t){Zt.sendServiceMsg({cmd:Dt,timeout:t},ke.top)},te.prototype.hideWaitingAssertionRetriesStatus=function(t){return Qt({cmd:Mt,waitingSuccess:t},At,ke.top)},te);function te(){return Jt.call(this)||this}var ee="ui|cursor|move|request",ie="ui|cursor|leftbuttondown|request",ne="ui|cursor|rightbuttondown|request",se="ui|cursor|buttonup|request",oe="ui|cursor|move|response",ae="ui|cursor|leftbuttondown|response",re="ui|cursor|rightbuttondown|response",le="ui|cursor|buttonup|response",ue=t.Promise,he=t.shadowUI,ce=t.utils.browser,de=t.utils.featureDetection,pe=t.eventSandbox.message,me=e.styleUtils,ge=e.positionUtils,fe="l-mouse-down",ve="r-mouse-down",ye=[fe,ve].join(" ");pe.on(pe.SERVICE_MSG_RECEIVED_EVENT,function(t){var e,i=t.message;switch(i.cmd){case ee:e=ge.getIframePointRelativeToParentFrame({x:i.x,y:i.y},t.source),Ce.move(e.x,e.y).then(function(){return pe.sendServiceMsg({cmd:oe},t.source)});break;case ie:Ce.leftButtonDown().then(function(){return pe.sendServiceMsg({cmd:ae},t.source)});break;case ne:Ce.rightButtonDown().then(function(){return pe.sendServiceMsg({cmd:re},t.source)});break;case se:Ce.buttonUp().then(function(){return pe.sendServiceMsg({cmd:le},t.source)})}});var Ce={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=Pe.createElement("div"),he.addClass(this.cursorElement,"cursor"),de.isTouchDevice&&!ce.isIE&&(he.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(me.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(me.getHeight(this.cursorElement)/2)),r.element().appendChild(this.cursorElement)},isVisible:function(){return this.cursorElement&&"hidden"!==me.get(this.cursorElement,"visibility")},hide:function(){this.cursorElement||this._createElement(),me.set(this.cursorElement,"visibility","hidden")},show:function(){this.cursorElement||this._createElement(),me.set(this.cursorElement,"visibility","")},move:function(t,e){return this.x=t,this.y=e,this.cursorElement||this._createElement(),me.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"}),ue.resolve()},leftButtonDown:function(){return this.cursorElement||this._createElement(),he.removeClass(this.cursorElement,ye),he.addClass(this.cursorElement,fe),ue.resolve()},rightButtonDown:function(){return this.cursorElement||this._createElement(),he.removeClass(this.cursorElement,ye),he.addClass(this.cursorElement,ve),ue.resolve()},buttonUp:function(){return this.cursorElement||this._createElement(),he.removeClass(this.cursorElement,ye),ue.resolve()}},Ee=t.utils.browser.isIE?1:0,_e={move:function(t,e){var i={cmd:ee,x:t+Ee,y:e+Ee};return o.sendRequestToFrame(i,oe,ke.parent)},leftButtonDown:function(){return o.sendRequestToFrame({cmd:ie},ae,ke.parent)},rightButtonDown:function(){return o.sendRequestToFrame({cmd:ne},re,ke.parent)},buttonUp:function(){return o.sendRequestToFrame({cmd:se},le,ke.parent)}},we={screenshotMark:null,_createMark:function(){this.screenshotMark=Pe.createElement("img"),s.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=10/ke.devicePixelRatio+"px",this.screenshotMark.style.width=32/ke.devicePixelRatio+"px",this.screenshotMark.style.height=10/ke.devicePixelRatio+"px",this.hide(),s.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),s.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},Se=t.Promise,Ie=t.eventSandbox.message,xe=e.sendRequestToFrame,be="ui|hide|request",Te="ui|hide|response",Be="ui|show|request",Ue="ui|show|response";Ie.on(Ie.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===be?(r.hide(),Ie.sendServiceMsg({cmd:Te},t.source)):t.message.cmd===Be&&(r.show(),Ie.sendServiceMsg({cmd:Ue},t.source))});var De={};De.uiRoot=r,De.cursorUI=Ce,De.iframeCursorUI=_e,De.selectElement=i,De.modalBackground=H,De.ProgressPanel=tt,De.StatusBar=Yt,De.IframeStatusBar=$t,De.hide=function(t){return t?xe({cmd:be},Te,ke.top):(r.hide(),Se.resolve())},De.show=function(t){return t?xe({cmd:Be},Ue,ke.top):(r.show(),Se.resolve())},De.showScreenshotMark=function(t){return we.show(t)},De.hideScreenshotMark=function(){return we.hide()};var Me=t.nativeMethods,Ae=t.EVENTS.evalIframeScript;Me.objectDefineProperty(ke,"%testCafeUI%",{configurable:!0,value:De}),t.on(Ae,function(t){return Ve(Me.contentWindowGetter.call(t.iframe))})}(ke["%hammerhead%"],ke["%testCafeCore%"])}(window);